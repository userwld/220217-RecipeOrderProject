<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cooking.recipe.order.dao.IOrderDAO">

<resultMap type="com.cooking.recipe.order.dto.OrderDTO" id="order">
	<result column="orderNum" property="orderNum"/>
	<result column="id" property="id"/>
	<result column="productNum" property="productNum"/>
	<result column="productName" property="productName"/>
	<result column="amount" property="amount"/>
	<result column="totalPrice" property="totalPrice"/>
	<result column="orderDate" property="orderDate"/>
	<result column="orderState" property="orderState"/>
</resultMap>

<update id="updateAddr" parameterType="com.cooking.recipe.member.dto.MemberDTO">
	update member set addr1=#{addr1},addr2=#{addr2},name=#{name} where id=#{id}
</update>

<insert id="insertOrder" parameterType="com.cooking.recipe.order.dto.OrderDTO">
	insert into orderList values(order_seq.nextval,#{id},#{productNum},#{productName},#{amount},#{totalPrice},to_char(sysdate,'YY-MM-DD'),'결제완료')
</insert>

<update id="updateStock">
	update product set stock=stock-#{amount} where productNum=#{productNum}
</update>

<delete id="deleteCart" parameterType="int">
	delete from cart where cartNum=#{cartNum}
</delete>

</mapper>